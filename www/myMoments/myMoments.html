<ion-view title="Moment" id="page4" cache-view="false">
	<ion-nav-title>
		<img class="title-image" src="img/header.png"/>
	</ion-nav-title>
	<ion-content padding="true" class="has-header">
<ion-refresher
on-refresh="vm.refreshing()">
</ion-refresher>
<div ng-show="vm.errorMessage" class="myMoments_NotFound">
	No Moments to Show
</div>
<div class="centerLikes">
	<img src="img/logo.png" class="totalLikesImage" height="50px" width="50px"></img></div>
	<div class="totalLikesText">{{vm.totalLikes}}<span class="totalNumberOfExtraLikes" ng-if="vm.extraLikes > 0"> (+{{vm.extraLikes}})</span></div>
	<br>
	<hr style="margin-top: 30px">
	<div class="row">
		<div class="col-75">
			<div class="location">{{vm.userLocation}}</div>
		</div>
		<div class="col">
			<button class="editButton col button button-energized " ng-click="vm.edit(true)"  ng-hide="vm.editing">Edit
			</button>
		</div>
	</div>
	<hr style="margin-bottom: 25px">
	<div class="row">
		<div class="col">
			<span class="searchRadiusText">Search Radius:</span><br>
			<div class = "radiusRange item range range-energized">
					<i>5</i>
					<input type = "range" name = "range" min="5" max="50" ng-model="vm.distance">
					<i> {{vm.distance}} Miles</i>
			</div>
		</div>
	</div>
	<hr>
<br>
<ion-list>
<div ng-repeat="image in vm.moments">
	<img data-ng-if="image.media === 'picture'" src="{{image.key}}" height="80%" width="100%"></img>

<!--Video Begin-->
  <div data-ng-if="image.media === 'video'" style="width: 100%; height: 300px">
    <videogular vg-theme="vm.config.theme">
      <vg-media vg-src="vm.sources"
          vg-tracks="vm.config.tracks"
          vg-native-controler="true">
      </vg-media>

      <vg-controls>
        <vg-play-pause-button></vg-play-pause-button>
        <vg-time-display>{{ currentTime | date:'mm:ss' }}</vg-time-display>
        <vg-scrub-bar>
          <vg-scrub-bar-current-time></vg-scrub-bar-current-time>
        </vg-scrub-bar>
        <vg-time-display>{{ timeLeft | date:'mm:ss' }}</vg-time-display>
        <vg-volume>
          <vg-mute-button></vg-mute-button>
          <vg-volume-bar></vg-volume-bar>
        </vg-volume>
        <vg-fullscreen-button></vg-fullscreen-button>
      </vg-controls>
 
      <vg-overlay-play></vg-overlay-play>
      <vg-poster vg-url='config.plugins.poster'></vg-poster>
    </videogular>
  </div>
<!--End of Video-->
	
	<!--<video data-ng-if="image.media === 'video'" width="100%" height="300px"preload="auto" controls>
		<source src="{{image.key}}" type="video/mp4"></source>
	</video>-->
		<div class="row row-no-padding">
			<div class="col">
				<img src="img/logo.png" width="25px" height"25px" style="float: left"></img>		
				<div ng-show="image.likes" class="likes">{{image.likes}}</div>
			</div>
			<div class="col">
				<div class="ion-ios-clock-outline time">{{image.time}}</div>
			</div>
		</div>
		<div class="row row-no-padding">
			<div class="col">
				<div class="description">{{image.description}}</div>
			</div>
		</div>
		<br>
		<hr>
		<br>

<!-- 	<ion-item-sliding>
	<ion-item ng-click="vm.toggleDescription(image)">
	<ion-thumbnail item-left>
	<img src="{{image.key}}" data-ng-if="image.media === 'picture'" width="30%" height="30%" style="float: left;">
	<video data-ng-if="image.media === 'video'" width="30%" height="30%" style="float: left;" controls>
		<source src="{{image.key}}" type="video/mp4"></source>
	</video>

</ion-thumbnail>
<div class="myMoments_metaData">
	<div class="myMoments_likes">	
		<img src="img/logo.png" class="logoMomentLikes" height="30px" width="30px"></img>
		<div style="margin-bottom:2px">{{image.likes}} 
		<span class="numberOfExtraMomentLikes" ng-if="image.gainedLikes > 0"> (+{{image.gainedLikes}})</span></div>
	</div>
	<div class="ion-ios-clock-outline myMoments_time">{{image.time}}</div>
	<br>
	<div class="myMoments_description" ng-show="image.description.length > 0">
		<div ng-hide="image.showShortDescription > 0">{{image.shortDescription}}<br>
			<div class="myMoments_toggleDescription">show more...</div>
		</div>
		<div ng-show="image.showShortDescription > 0">{{image.description}}<br> 			
			<div class="myMoments_toggleDescription">show less</div> 
		</div>
		<br>
	</div>
			<div class="noDescription" ng-hide="image.description.length > 0">
				<br>No Description
	</div>
</div>
</ion-item>
<ion-item-options slide="left">
</ion-item-options>
</ion-item-sliding> -->
</div> <!--End of ng-repeat -->
</ion-list>
<div class = "row">
	<button class="col button button-assertive" data-ng-click="vm.feedback()" style="margin: 5px">Feedback</button>
</div>
</ion-content>
</ion-view>