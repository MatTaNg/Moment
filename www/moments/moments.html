<ion-view id="page2" cache-view="false">
	<ion-nav-title>
		<img class="title-image" src="img/header.png"/>
	</ion-nav-title>
<ion-content padding="true" class="has-header">
<div ng-show="vm.moments && vm.showComments === false">
	<span ng-repeat="image in vm.moments">

		<td-cards>
		<td-card on-drag-right="vm.dragRight()" on-drag-left="vm.dragLeft()" on-release="vm.release($event)" on-touch="vm.setCoords()"
		on-partial-swipe="cardPartialSwipe(amt)" class = "{{image.class}}">

				<img data-ng-if="image.media === 'picture'" src="{{image.key}}" height="80%" width="100%"></img>

			<!--Video Begin-->
				<div data-ng-if="image.media === 'video'"class="videoBox">
					<videogular vg-theme="vm.config.theme">
						<vg-media vg-src="vm.config.sources"
								vg-tracks="vm.config.tracks"
								vg-native-controler="true">
						</vg-media>

						<vg-controls>
							<vg-play-pause-button></vg-play-pause-button>
							<vg-time-display>{{ currentTime | date:'mm:ss' }}</vg-time-display>
							<vg-scrub-bar>
								<vg-scrub-bar-current-time></vg-scrub-bar-current-time>
							</vg-scrub-bar>
							<vg-time-display>{{ timeLeft | date:'mm:ss' }}</vg-time-display>
							<vg-volume>
								<vg-mute-button></vg-mute-button>
								<vg-volume-bar></vg-volume-bar>
							</vg-volume>
							<vg-fullscreen-button></vg-fullscreen-button>
						</vg-controls>
			 
						<vg-overlay-play></vg-overlay-play>
						<vg-poster vg-url='config.plugins.poster'></vg-poster>
					</videogular>
				</div>
			<!--End of Video-->

				<div class="row row-no-padding">
					<div class="col">
						<img src="img/logo.png" width="25px" height"25px" class="likesIcon"></img>
						<div ng-show="image.likes" class="momentLikes">{{image.likes}}</div>
					</div>
					<div class="col">
						<div class="ion-ios-clock-outline momentTime">{{image.time}}</div>
					</div>
				</div>
				<div class="row row-no-padding">
					<div class="col">
						<div class="momentLocation">{{image.location}}</div>
					</div>
				</div>
				<img src="img/Liked.png" ng-show="image.swipedRight" width="100px" height="100px"class="on-drag-liked {{image.animate}}"></img>
				<img src="img/Next.png" ng-show="image.swipedLeft" class="on-drag-next {{image.animate}}"></img>
				<hr>
				<div class="descriptionBox">
					<span ng-show="image.description">{{ image.description }}  </span>
					<div ng-hide="image.description" class="noDescription">No Description Found</div>
					<!-- <div data-ng-click="vm.navToComments()">Comments</div> -->
					<div class="view-comments-link" ng-click="vm.viewComments()">View {{image.comments.length}} Comments</div>
					<div class="{{vm.flagClass}}" ng-click="vm.flagged()"> </div>
					<!--<div class="ion-archive" ng-click="vm.downloadMoment(image)"> </div>-->
				</div>

		</td-card>
		</td-cards>
	</span> <!--End of ng-repeat-->

	<img data-ng-if="vm.moments.length === 0 && vm.loadingMoments === false" src="img/no-results-found.png" width= "100%" class="noMoments"></img> 
	<img data-ng-if="vm.loadingMoments === true" src="img/LoadingMoments.png" width= "100%" class="loadingMoments"></img>
</div> <!-- End of ng-show -->
<div data-ng-if="vm.showComments === true">
	<div mng-comments moment="vm.moment" moments-array="vm.moments" show-comments="vm.showComments" local-storage-name="moments"></div>
</div>
</ion-content>
</ion-view>
<!--on-swipe-left="vm.liked(false)" on-swipe-right="vm.liked(true)"-->